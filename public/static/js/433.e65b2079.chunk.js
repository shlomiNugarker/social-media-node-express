"use strict";(self.webpackChunksocial_network_app=self.webpackChunksocial_network_app||[]).push([[433],{2896:function(e,n,t){t.d(n,{o:function(){return m}});var o=t(4165),s=t(4942),i=t(1413),r=t(5861),a=t(9439),l=t(1363),c=t(2791),d=t(1672),u=t(9722),p=t(184),m=function(e){var n=e.toggleShowCreatePost,t=e.onAddPost,m=e.isShowCreatePost,v=e.loggedInUser,f=(0,c.useState)({body:"",imgBodyUrl:null,videoBodyUrl:null,link:"",title:"",style:{textAlign:"ltr"}}),h=(0,a.Z)(f,2),x=h[0],g=h[1],j=(0,c.useState)(!1),N=(0,a.Z)(j,2),y=N[0],U=N[1],Z=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(n){var t,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.target.name,r="number"===n.target.type?+n.target.value||"":n.target.value,g((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,s.Z)({},t,r))}));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){return function(){g(null)}}),[]);var b=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(n){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U(!0),e.next=4,(0,d.T)(n);case 4:t=e.sent,U(!1),g((function(e){return(0,i.Z)((0,i.Z)({},e),{},{imgBodyUrl:t.url})})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),U(!1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}(),k=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(n){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U(!0),e.next=4,(0,d.u)(n);case 4:t=e.sent,U(!1),g((function(e){return(0,i.Z)((0,i.Z)({},e),{},{videoBodyUrl:t.url})})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),U(!1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}();return(0,p.jsx)("section",{className:m?" create-post-modal":"hide create-post-modal",onClick:function(e){e.stopPropagation(),n()},children:(0,p.jsxs)("form",{className:"container",onSubmit:function(e){e.preventDefault(),t(x)},onClick:function(e){e.stopPropagation()},children:[(0,p.jsxs)("div",{className:"title",children:[(0,p.jsx)("h1",{children:"Create a post"}),(0,p.jsx)("span",{className:"close-icon",onClick:n,children:(0,p.jsx)(l.G,{icon:"fa-solid fa-x"})})]}),(0,p.jsxs)("div",{className:"name-container",children:[(0,p.jsx)("div",{className:"img-container",children:(0,p.jsx)("img",{src:null===v||void 0===v?void 0:v.imgUrl,alt:"",className:"img-profile"})}),(0,p.jsx)("div",{className:"name",children:(0,p.jsx)("h2",{children:null===v||void 0===v?void 0:v.fullname})})]}),(0,p.jsx)("div",{className:"input-container",children:(0,p.jsx)("textarea",{required:!0,ref:function(e){e&&e.focus()},onChange:Z,type:"text",id:"body",name:"body",value:x.txt,placeholder:"What do you want to talk about?"})}),(0,p.jsx)("div",{className:"link-container",children:(0,p.jsx)("input",{id:"link",name:"link",value:x.link,onChange:Z,type:"text",placeholder:"Add a link here"})}),(0,p.jsx)("div",{className:"is-loading-container",children:(0,p.jsx)("p",{children:y&&(0,p.jsx)("span",{children:(0,p.jsx)("img",{src:u,alt:""})})})}),(0,p.jsx)("div",{className:"container-video-body",children:(0,p.jsx)("div",{className:"body-video",children:x.videoBodyUrl&&(0,p.jsx)("video",{width:"100%",height:"300",controls:!0,children:(0,p.jsx)("source",{src:x.videoBodyUrl,type:"video/mp4"})})})}),(0,p.jsx)("div",{className:"container-img-body",children:(0,p.jsx)("div",{className:"body-img",children:x.imgBodyUrl&&(0,p.jsx)("img",{src:x.imgBodyUrl,alt:"",className:"img"})})}),(0,p.jsxs)("div",{className:"btns-add-container",children:[(0,p.jsx)("div",{className:"cancel-btn btn",onClick:function(){g({body:"",imgBodyUrl:null,videoBodyUrl:null,title:"",style:{textAlign:"ltr"}}),n()},children:"Cancel"}),!x.videoBodyUrl&&(0,p.jsx)("div",{className:"add-video-btn btn",children:(0,p.jsxs)("label",{htmlFor:"videoUrl",className:"add-video-container",children:[(0,p.jsx)("input",{onChange:k,id:"videoUrl",type:"file",name:"videoUrl",accept:"video/*",hidden:!0}),(0,p.jsx)("p",{className:"add-video-body",children:"Add video"})]})}),!x.imgBodyUrl&&(0,p.jsx)("div",{className:"add-img-btn btn",children:(0,p.jsxs)("label",{htmlFor:"imgUrl",className:"add-img-container",children:[(0,p.jsx)("input",{onChange:b,id:"imgUrl",type:"file",name:"imgUrl",accept:"image/*",hidden:!0}),(0,p.jsx)("p",{className:"add-img-body",children:"Add photo"})]})}),(0,p.jsx)("button",{className:"post-btn btn",children:"Done"})]})]})})}},9334:function(e,n,t){t.d(n,{O:function(){return u}});var o=t(4165),s=t(5861),i=t(9439),r=t(2791),a=t(1363),l=t(8931),c=t(8874),d=t(184);function u(e){var n=e.toggleShowImg,t=e.imgUrl,u=e.videoUrl,p=e.title,m=e.post,v=e.body,f=(0,l.k6)(),h=(0,r.useState)(null),x=(0,i.Z)(h,2),g=x[0],j=x[1],N=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(n){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.W.getById(n);case 2:t=e.sent,j(t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){null!==m&&void 0!==m&&m.userId&&N(m.userId)}),[]),(0,d.jsxs)("div",{className:"img-profile-preview",children:[(0,d.jsx)("div",{className:"bg",onClick:n}),(0,d.jsxs)("section",{className:"container",children:[(0,d.jsxs)("div",{className:"title",children:[g&&m&&(0,d.jsxs)("div",{className:"user-details",onClick:function(){return f.push("/main/profile/".concat(m.userId))},children:[(0,d.jsx)("img",{src:g.imgUrl,alt:"",className:"img"}),(0,d.jsx)("p",{className:"fullname",children:g.fullname})]})||m&&(0,d.jsx)("p",{className:"user-details",children:"Loading user..."}),(0,d.jsx)("p",{children:p}),(0,d.jsx)("span",{className:"logo-close",onClick:n,children:(0,d.jsx)(a.G,{icon:"fa-solid fa-x"})})]}),v&&(0,d.jsx)("div",{children:(0,d.jsx)("p",{className:"body",children:v})}),m&&(0,d.jsx)("div",{className:"see-post",children:(0,d.jsx)("p",{onClick:function(){return f.push("/main/post/".concat(m.userId,"/").concat(m._id))},children:"See original post"})}),(0,d.jsx)("div",{className:"img-container",children:t&&(0,d.jsx)("img",{className:"img",src:t,alt:""})||u&&(0,d.jsx)("div",{children:(0,d.jsx)("video",{width:"100%",height:"300",controls:!0,children:(0,d.jsx)("source",{src:u,type:"video/mp4"})})})})]})]})}},7433:function(e,n,t){t.r(n),t.d(n,{default:function(){return g}});var o=t(1413),s=t(9439),i=t(2791),r=t(2040),a=t(9434),l=t(8931),c=t(184),d=function(e){var n=e.url,t=e.userId,o=e.fullname,r=e.isCloseUserIcon,a=(0,i.useState)(!1),d=(0,s.Z)(a,2),u=d[0],p=d[1],m=(0,l.k6)();return(0,i.useEffect)((function(){return r&&p(!1),function(){}}),[r]),(0,c.jsxs)("div",{className:"user-icon-pos-container",onClick:function(e){e.stopPropagation(),p((function(e){return!e}))},children:[(0,c.jsx)("img",{className:"user-icon-pos",src:n,alt:o,title:o}),u&&(0,c.jsxs)("div",{className:"menu-container",children:[(0,c.jsxs)("div",{className:"opts-btns",children:[(0,c.jsx)("div",{className:"fullname ",children:(0,c.jsx)("p",{children:o})}),(0,c.jsx)("div",{className:"go-to-profile opt",onClick:function(){return m.push("/main/profile/".concat(t))},children:(0,c.jsx)("p",{children:"Go to profile"})}),(0,c.jsx)("div",{className:"send-message opt",onClick:function(){return m.push("/main/message/".concat(t))},children:(0,c.jsx)("p",{children:"Send a message"})})]}),(0,c.jsx)("div",{className:"close",onClick:function(e){e.stopPropagation(),p(!1)},children:(0,c.jsx)("span",{children:"Close"})})]})]})},u=t(1363),p=function(e){e.menuPosition;var n=e.setIsCreateShowPost;return(0,c.jsxs)("section",{className:"map-menu",children:[(0,c.jsx)("span",{className:"location-icon",children:(0,c.jsx)(u.G,{icon:"fa-solid fa-location-dot"})}),(0,c.jsx)("div",{className:"opts-container",children:(0,c.jsx)("div",{className:"add-post-to-map opt",onClick:function(){n(!0)},children:(0,c.jsx)("p",{children:"Add a post here"})})})]})},m=function(e){var n=e.post,t=e.setPostToPreview;return(0,c.jsx)("section",{className:"post-icon-map",children:(0,c.jsx)("div",{className:"container",children:(0,c.jsx)("div",{className:"logo-post-icon-map-container",onClick:function(){return t(n)},children:(0,c.jsx)("span",{className:"img-logo",children:n.imgBodyUrl&&(0,c.jsx)("img",{src:n.imgBodyUrl,alt:"",className:"img"})||n.videoBodyUrl&&(0,c.jsx)("p",{children:(0,c.jsx)("span",{className:"post-logo",children:(0,c.jsx)(u.G,{icon:"fa-solid fa-video"})})})||(0,c.jsx)("p",{children:(0,c.jsx)("span",{className:"post-logo",children:(0,c.jsx)(u.G,{icon:"fa-solid fa-comment-dots"})})})})})})})},v=t(9334),f=t(2896),h=t(262),x=t(4029);var g=function(){var e=(0,a.I0)(),n=(0,i.useState)({center:{lat:32.05591645013164,lng:34.7549857056555},zoom:2,yesIWantToUseGoogleMapApiInternals:!0}),t=(0,s.Z)(n,2),l=t[0],u=(t[1],(0,i.useState)(!1)),g=(0,s.Z)(u,2),j=g[0],N=g[1],y=(0,i.useState)(!1),U=(0,s.Z)(y,2),Z=U[0],b=U[1],k=(0,i.useState)(null),C=(0,s.Z)(k,2),w=C[0],S=C[1],P=(0,i.useState)(!1),I=(0,s.Z)(P,2),_=I[0],B=I[1],T=(0,i.useState)(!1),A=(0,s.Z)(T,2),E=A[0],G=A[1],R=(0,a.v9)((function(e){return e.userModule})).loggedInUser,O=(0,a.v9)((function(e){return e.userModule})).users,L=(0,a.v9)((function(e){return e.postModule})).posts;(0,i.useEffect)((function(){e((0,h.rd)("map"));var n={position:"position"};return e((0,x.uQ)(n)),e((0,x.Rf)()),e((0,h.L6)(n)),e((0,h.Nz)()),navigator.geolocation?navigator.geolocation.getCurrentPosition(W):console.log("Geolocation is not supported by this browser."),function(){e((0,h.L6)(null)),e((0,x.uQ)(null))}}),[]);var D=function(){G((function(e){return!e}))};function W(n){var t={lat:n.coords.latitude,lng:n.coords.longitude};n&&function(n){R&&e((0,x.Nq)((0,o.Z)((0,o.Z)({},R),{},{position:n})))}(t)}var M=function(e){var n={lat:e.lat,lng:e.lng};N((function(e){return!e})),S(n),b((function(e){return!e}))};return(0,c.jsxs)("section",{className:"map-page ",children:[(0,c.jsx)("div",{className:"map",style:{height:"100%",width:"100%"},children:(0,c.jsxs)(r.ZP,{bootstrapURLKeys:{key:"".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GOOGLE_MAP_KEY)},defaultCenter:l.center,defaultZoom:l.zoom,yesIWantToUseGoogleMapApiInternals:!0,onClick:function(e){return M(e)},children:[O&&O.map((function(e){var n,t;return(0,c.jsx)(d,{lat:(null===e||void 0===e||null===(n=e.position)||void 0===n?void 0:n.lat)||32.05591645013164,lng:(null===e||void 0===e||null===(t=e.position)||void 0===t?void 0:t.lng)||34.7549857056555,url:e.imgUrl,userId:e._id,fullname:e.fullname,isCloseUserIcon:j},e._id)})),L&&L.map((function(e){var n,t;return(0,c.jsx)(m,{lat:null===e||void 0===e||null===(n=e.position)||void 0===n?void 0:n.lat,lng:null===e||void 0===e||null===(t=e.position)||void 0===t?void 0:t.lng,post:e,setPostToPreview:B},null===e||void 0===e?void 0:e._id)})),Z&&w&&(0,c.jsx)(p,{menuPosition:w,lat:w.lat,lng:w.lng,setIsCreateShowPost:G})]})}),_&&(0,c.jsx)(v.O,{toggleShowImg:function(e){B(_?null:e)},title:_.title,body:_.body,imgUrl:_.imgBodyUrl,post:_,videoUrl:null===_||void 0===_?void 0:_.videoBodyUrl}),E&&(0,c.jsx)(f.o,{isShowCreatePost:E,onAddPost:function(n){var t=(0,o.Z)((0,o.Z)({},n),{},{userId:R._id,position:w});e((0,h.TJ)(t)).then((function(){return D()}))},toggleShowCreatePost:D,loggedInUser:R})]})}},1672:function(e,n,t){t.d(n,{T:function(){return a},u:function(){return l}});var o=t(4165),s=t(5861),i=t(1732),r=function(e){return new Promise((function(n,t){var o=new FileReader;o.readAsDataURL(e),o.onload=function(){return n(o.result)},o.onerror=function(e){return t(e)}}))},a=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(n){var t,s,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.target.files[0],e.next=4,r(t);case 4:return s=e.sent,e.next=7,i.R.post("cloudinary/upload",{file:s,resourceType:"image"});case 7:return a=e.sent,e.abrupt("return",a);case 11:throw e.prev=11,e.t0=e.catch(0),console.error("Error uploading image:",e.t0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(n){var t,s,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.target.files[0],e.next=4,r(t);case 4:return s=e.sent,e.next=7,i.R.post("cloudinary/upload",{file:s,resourceType:"video"});case 7:return a=e.sent,e.abrupt("return",a);case 11:throw e.prev=11,e.t0=e.catch(0),console.error("Error uploading video:",e.t0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(n){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=433.e65b2079.chunk.js.map