"use strict";(self.webpackChunksocial_network_app=self.webpackChunksocial_network_app||[]).push([[869],{2896:(e,s,i)=>{i.d(s,{o:()=>d});var l=i(8683),n=i(1363),o=i(2791),a=i(1672),r=i(9722),c=i(184);const d=e=>{let{toggleShowCreatePost:s,onAddPost:i,isShowCreatePost:d,loggedInUser:t}=e;const[m,h]=(0,o.useState)({body:"",imgBodyUrl:null,videoBodyUrl:null,link:"",title:"",style:{textAlign:"ltr"}}),[x,j]=(0,o.useState)(!1),u=async e=>{const s=e.target.name;let i="number"===e.target.type?+e.target.value||"":e.target.value;h((e=>(0,l.Z)((0,l.Z)({},e),{},{[s]:i})))};(0,o.useEffect)((()=>()=>{h(null)}),[]);return(0,c.jsx)("section",{className:d?" create-post-modal":"hide create-post-modal",onClick:e=>{e.stopPropagation(),s()},children:(0,c.jsxs)("form",{className:"container",onSubmit:e=>{e.preventDefault(),i(m)},onClick:e=>{e.stopPropagation()},children:[(0,c.jsxs)("div",{className:"title",children:[(0,c.jsx)("h1",{children:"Create a post"}),(0,c.jsx)("span",{className:"close-icon",onClick:s,children:(0,c.jsx)(n.G,{icon:"fa-solid fa-x"})})]}),(0,c.jsxs)("div",{className:"name-container",children:[(0,c.jsx)("div",{className:"img-container",children:(0,c.jsx)("img",{src:null===t||void 0===t?void 0:t.imgUrl,alt:"",className:"img-profile"})}),(0,c.jsx)("div",{className:"name",children:(0,c.jsx)("h2",{children:null===t||void 0===t?void 0:t.fullname})})]}),(0,c.jsx)("div",{className:"input-container",children:(0,c.jsx)("textarea",{required:!0,ref:e=>{e&&e.focus()},onChange:u,type:"text",id:"body",name:"body",value:m.txt,placeholder:"What do you want to talk about?"})}),(0,c.jsx)("div",{className:"link-container",children:(0,c.jsx)("input",{id:"link",name:"link",value:m.link,onChange:u,type:"text",placeholder:"Add a link here"})}),(0,c.jsx)("div",{className:"is-loading-container",children:(0,c.jsx)("p",{children:x&&(0,c.jsx)("span",{children:(0,c.jsx)("img",{src:r,alt:""})})})}),(0,c.jsx)("div",{className:"container-video-body",children:(0,c.jsx)("div",{className:"body-video",children:m.videoBodyUrl&&(0,c.jsx)("video",{width:"100%",height:"300",controls:!0,children:(0,c.jsx)("source",{src:m.videoBodyUrl,type:"video/mp4"})})})}),(0,c.jsx)("div",{className:"container-img-body",children:(0,c.jsx)("div",{className:"body-img",children:m.imgBodyUrl&&(0,c.jsx)("img",{src:m.imgBodyUrl,alt:"",className:"img"})})}),(0,c.jsxs)("div",{className:"btns-add-container",children:[(0,c.jsx)("div",{className:"cancel-btn btn",onClick:()=>{h({body:"",imgBodyUrl:null,videoBodyUrl:null,title:"",style:{textAlign:"ltr"}}),s()},children:"Cancel"}),!m.videoBodyUrl&&(0,c.jsx)("div",{className:"add-video-btn btn",children:(0,c.jsxs)("label",{htmlFor:"videoUrl",className:"add-video-container",children:[(0,c.jsx)("input",{onChange:async e=>{try{j(!0);const s=await(0,a.u)(e);j(!1),h((e=>(0,l.Z)((0,l.Z)({},e),{},{videoBodyUrl:s.url})))}catch(s){j(!1),console.log(s)}},id:"videoUrl",type:"file",name:"videoUrl",accept:"video/*",hidden:!0}),(0,c.jsx)("p",{className:"add-video-body",children:"Add video"})]})}),!m.imgBodyUrl&&(0,c.jsx)("div",{className:"add-img-btn btn",children:(0,c.jsxs)("label",{htmlFor:"imgUrl",className:"add-img-container",children:[(0,c.jsx)("input",{onChange:async e=>{try{j(!0);const s=await(0,a.T)(e);j(!1),h((e=>(0,l.Z)((0,l.Z)({},e),{},{imgBodyUrl:s.url})))}catch(s){j(!1),console.log(s)}},id:"imgUrl",type:"file",name:"imgUrl",accept:"image/*",hidden:!0}),(0,c.jsx)("p",{className:"add-img-body",children:"Add photo"})]})}),(0,c.jsx)("button",{className:"post-btn btn",children:"Done"})]})]})})}},8460:(e,s,i)=>{i.d(s,{E:()=>m});var l=i(1502),n=i(9434),o=i(2791),a=i(9722),r=i(8931),c=i(262),d=i(1363),t=i(184);const m=()=>{const e=(0,n.I0)(),s=(0,r.UO)(),{posts:i}=(0,n.v9)((e=>e.postModule)),{pageNumber:m}=(0,n.v9)((e=>e.postModule)),{isPostsLoading:h}=(0,n.v9)((e=>e.postModule)),{postsLength:x}=(0,n.v9)((e=>e.postModule)),j=()=>{const l={pageNumber:m};s.userId&&(l.userId=s.userId),(x||i)&&x!==(null===i||void 0===i?void 0:i.length)&&(e((0,c.v)(l)),e((0,c.dH)()),e((0,c.bs)()))},u=()=>{(null===i||void 0===i?void 0:i.length)>=x||window.scrollY+window.innerHeight+.9>=document.documentElement.scrollHeight&&j()};return(0,o.useEffect)((()=>(window.addEventListener("scroll",u),()=>{window.removeEventListener("scroll",u)})),[x]),i?(0,t.jsxs)("section",{className:"posts-list",children:[i.map(((e,s)=>(0,t.jsx)(l.G,{post:e},e._id+s))),(0,t.jsxs)("div",{onClick:j,className:"load-more",children:[!h&&(null===i||void 0===i?void 0:i.length)<x&&(0,t.jsx)("p",{className:"load-btn",children:(0,t.jsx)("span",{children:(0,t.jsx)(d.G,{icon:"fa-solid fa-caret-down"})})}),h&&(null===i||void 0===i?void 0:i.length)<x&&(0,t.jsx)("span",{className:"gif-container",children:(0,t.jsx)("img",{className:"loading-gif",src:a,alt:""})}),(null===i||void 0===i?void 0:i.length)===x&&(0,t.jsx)("p",{children:"No more posts"})]})]}):(0,t.jsx)("div",{className:"posts-list",children:(0,t.jsx)("span",{className:"gif-container",children:(0,t.jsx)("img",{className:"loading-gif",src:a,alt:""})})})}},1869:(e,s,i)=>{i.r(s),i.d(s,{default:()=>b});var l=i(2791),n=i(9434),o=i(8683),a=i(1363),r=i(2896),c=i(262),d=i(184);const t=()=>{const e=(0,n.I0)(),{loggedInUser:s}=(0,n.v9)((e=>e.userModule)),[i,t]=(0,l.useState)(!1),m=()=>{t((e=>!e))};return(0,d.jsxs)("section",{className:"add-post",onClick:m,children:[(0,d.jsxs)("section",{className:"top",children:[(0,d.jsx)("div",{className:"img-container",children:(0,d.jsx)("img",{src:s.imgUrl,alt:"",className:"icon"})}),(0,d.jsx)("button",{className:"input-container",children:(0,d.jsx)("span",{children:"Start a post"})})]}),(0,d.jsxs)("section",{className:"btns-container",children:[(0,d.jsxs)("button",{children:[(0,d.jsx)(a.G,{className:"photo icon",icon:"fa-solid fa-image"}),(0,d.jsx)("span",{children:"Photo"})]}),(0,d.jsxs)("button",{children:[(0,d.jsx)(a.G,{className:"video icon",icon:"fa-solid fa-video"}),(0,d.jsx)("span",{children:"Video"})]}),(0,d.jsxs)("button",{children:[(0,d.jsx)(a.G,{className:"calendar icon",icon:"fa-solid fa-calendar-days"}),(0,d.jsx)("span",{children:"Event"})]}),(0,d.jsxs)("button",{children:[(0,d.jsx)(a.G,{className:"newspaper icon",icon:"fa-solid fa-newspaper"}),(0,d.jsx)("span",{children:"Write article"})]})]}),(0,d.jsx)(r.o,{isShowCreatePost:i,toggleShowCreatePost:m,onAddPost:i=>{const l=(0,o.Z)((0,o.Z)({},i),{},{userId:s._id,fullname:s.fullname});e((0,c.TJ)(l)).then((()=>m()))},loggedInUser:s})]})};var m=i(8460);const h=e=>{let{onSetSort:s}=e;return(0,d.jsxs)("section",{className:"sort-by",children:[(0,d.jsx)("hr",{className:"divider"}),(0,d.jsx)("form",{action:"",className:"sort-container",children:(0,d.jsxs)("label",{htmlFor:"sortBy",className:"label",children:["Sort by:",(0,d.jsxs)("select",{name:"sortBy",id:"opts",onChange:e=>{s(e.target.value)},children:[(0,d.jsx)("option",{value:"-1",children:"Newest"}),(0,d.jsx)("option",{value:"1",children:"Oldest"})]})]})})]})};var x=i(9722);const j=()=>{const e=(0,n.I0)(),{posts:s}=(0,n.v9)((e=>e.postModule));(0,l.useEffect)((()=>{e((0,c.Nz)()),e((0,c.Cd)())}),[e]);return s?(0,d.jsxs)("section",{className:"posts",children:[(0,d.jsx)(t,{}),(0,d.jsx)(h,{onSetSort:s=>{const i={sort:+s};e((0,c.v)(i)),e((0,c.Nz)()),e((0,c.Cd)())}}),s&&(0,d.jsx)(m.E,{})]}):(0,d.jsx)("section",{className:"posts",children:(0,d.jsx)("img",{src:x,alt:"",style:{position:"relative",left:" 50%",transform:" translate(-50%)"}})})};var u=i(8931),v=i(4029);const p=()=>{const{users:e}=(0,n.v9)((e=>e.userModule)),s=(0,n.I0)(),i=(0,u.k6)(),{loggedInUser:o}=(0,n.v9)((e=>e.userModule)),[a,r]=(0,l.useState)([]),c=(0,l.useCallback)((()=>{if(e&&o){const s=e.filter((e=>!o.connections.some((s=>s.userId===e._id))));r(s)}}),[e,o]);(0,l.useEffect)((()=>{c()}),[c]),(0,l.useEffect)((()=>{s((0,v.Rf)())}),[s]);return a.length>0&&(0,d.jsxs)("section",{className:"right-side-bar",children:[(0,d.jsxs)("div",{className:"container",children:[(0,d.jsx)("div",{className:"title",children:(0,d.jsx)("p",{children:"Add to your feed"})}),(0,d.jsx)("br",{}),(0,d.jsx)("div",{className:"list",children:(null===a||void 0===a?void 0:a.length)&&[0,1,2].map(((e,s)=>{var l,n,o,r;return(0,d.jsxs)("div",{className:"preview",onClick:()=>{var s;return i.push("profile/".concat(null===(s=a[e])||void 0===s?void 0:s._id))},children:[(0,d.jsx)("div",{className:"img-container",children:(0,d.jsx)("img",{src:null===(n=a[e])||void 0===n?void 0:n.imgUrl,className:"img",alt:""})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"fullname",children:(0,d.jsx)("p",{children:null===(o=a[e])||void 0===o?void 0:o.fullname})}),(0,d.jsx)("div",{className:"profession",children:(0,d.jsx)("p",{children:null===(r=a[e])||void 0===r?void 0:r.profession})}),(0,d.jsx)("div",{className:"btn"})]})]},(null===(l=a[e])||void 0===l?void 0:l._id)||s)}))})]}),(0,d.jsxs)("div",{className:"else-container",children:[(0,d.jsx)("div",{children:(0,d.jsx)("h3",{children:"Promoted"})}),(0,d.jsx)("br",{}),(0,d.jsx)("div",{children:(0,d.jsx)("p",{children:"Looking for a full-stack developer for your project or team? I'm open to collaboration and exciting challenges."})}),(0,d.jsx)("br",{}),(0,d.jsx)("div",{className:"img-container",children:(0,d.jsx)("a",{href:"https://www.shlomi.dev/",target:"_blank",rel:"noreferrer",children:(0,d.jsx)("img",{src:"https://res.cloudinary.com/duajg3ah1/image/upload/v1741866031/6ed80c70-7184-4e22-af43-c1b9357bfb2c.png",className:"img",alt:""})})})]})]})};function g(e){return(0,d.jsxs)("section",{className:"community-panel",children:[(0,d.jsx)("div",{children:(0,d.jsx)("img",{src:"https://images.unsplash.com/photo-1488646953014-85cb44e25828?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1035&q=80",alt:""})}),(0,d.jsx)("div",{children:(0,d.jsxs)("p",{children:["Explore topics you are interested in ",(0,d.jsx)("br",{})," with Travelsdin"]})})]})}const f=e=>{var s;const i=(0,n.I0)(),l=(0,u.k6)(),{loggedInUser:o}=(0,n.v9)((e=>e.userModule));if(!o)return(0,d.jsx)("section",{className:"feed-identity-module",children:"Loading"});const{fullname:r,imgUrl:c,profession:t}=o;return(0,d.jsx)("section",{className:"feed-identity-module",children:(0,d.jsxs)("div",{className:"",children:[(0,d.jsx)("div",{className:"bg",children:(0,d.jsx)("div",{className:"profile-container",onClick:()=>l.push("profile/".concat(o._id)),children:(0,d.jsx)("img",{src:c,alt:"",className:"img"})})}),(0,d.jsxs)("div",{className:"profile-name",children:[(0,d.jsx)("h1",{children:r}),(0,d.jsx)("p",{className:"professional",children:t})]}),(0,d.jsxs)("div",{className:"views",children:[(0,d.jsx)("div",{children:(0,d.jsxs)("p",{children:[null===o||void 0===o||null===(s=o.connections)||void 0===s?void 0:s.length," connections"]})}),(0,d.jsx)("div",{})]}),(0,d.jsx)("div",{className:"my-items",children:(0,d.jsxs)("div",{onClick:async()=>{i((0,v.kS)()).then((e=>{e&&l.push("/")}))},children:[(0,d.jsx)("p",{children:"Logout"}),(0,d.jsx)("span",{children:(0,d.jsx)(a.G,{icon:"fa-solid fa-arrow-right-from-bracket"})})]})})]})})};function N(e){return(0,d.jsxs)("section",{className:"left-side-bar",children:[(0,d.jsx)(f,{}),(0,d.jsx)(g,{})]})}const b=()=>{const{loggedInUser:e}=(0,n.v9)((e=>e.userModule)),s=(0,n.I0)();return(0,l.useEffect)((()=>{s((0,c.rd)("home")),s((0,c.bs)(1))}),[s]),e?(0,d.jsxs)("section",{className:"feed-page",children:[(0,d.jsx)(N,{}),(0,d.jsx)(j,{}),(0,d.jsx)(p,{})]}):(0,d.jsx)("section",{className:"feed-load",children:(0,d.jsx)("div",{className:"loading",children:(0,d.jsx)("span",{children:(0,d.jsx)("img",{src:x,alt:""})})})})}},1672:(e,s,i)=>{i.d(s,{T:()=>o,u:()=>a});var l=i(1732);const n=e=>new Promise(((s,i)=>{const l=new FileReader;l.readAsDataURL(e),l.onload=()=>s(l.result),l.onerror=e=>i(e)})),o=async e=>{try{const s=e.target.files[0];if(!s)throw new Error("No file selected");const i=await n(s);return await l.R.post("cloudinary/upload",{file:i,resourceType:"image"})}catch(s){throw console.error("Error uploading image:",null===s||void 0===s?void 0:s.message),s}},a=async e=>{try{const s=e.target.files[0];if(!s)throw new Error("No file selected");const i=await n(s);return await l.R.post("cloudinary/upload",{file:i,resourceType:"video"})}catch(s){throw console.error("Error uploading video:",null===s||void 0===s?void 0:s.message),s}}}}]);
//# sourceMappingURL=869.d2749c70.chunk.js.map