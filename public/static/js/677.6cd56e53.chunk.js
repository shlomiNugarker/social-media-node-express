"use strict";(self.webpackChunksocial_network_app=self.webpackChunksocial_network_app||[]).push([[677],{7677:(e,t,i)=>{i.r(t),i.d(t,{default:()=>x});var n=i(8683),o=i(2791),a=i(9434),s=i(262),d=i(8874),l=i(773),c=i(8931),r=i(7019),u=i(5478),v=i(184);function m(e){let{activity:t}=e;const i=(0,c.k6)(),[n,s]=(0,o.useState)(null),[m,f]=(0,o.useState)(null),[p,h]=(0,o.useState)(null),[g,x]=(0,o.useState)(null),[j,y]=(0,o.useState)(null),[N,_]=(0,o.useState)(!1),{loggedInUser:w}=(0,a.v9)((e=>e.userModule)),{unreadActivities:I}=(0,a.v9)((e=>e.activityModule));return(0,o.useEffect)((()=>{(async()=>{if(g&&j)if("add-like"===t.type){const e=await r.W.getById(t.postId),i="".concat((null===g||void 0===g?void 0:g._id)===(null===w||void 0===w?void 0:w._id)?"You":null===g||void 0===g?void 0:g.fullname," liked  post of ").concat(j._id===w._id?"you":null===j||void 0===j?void 0:j.fullname),n="post/".concat(null===e||void 0===e?void 0:e.userId,"/").concat(null===t||void 0===t?void 0:t.postId);h(n),f(i)}else if("remove-like"===t.type){const e=await r.W.getById(t.postId),i="".concat((null===g||void 0===g?void 0:g._id)===(null===w||void 0===w?void 0:w._id)?"You":null===g||void 0===g?void 0:g.fullname," unliked  post of ").concat(j._id===w._id?"you":null===j||void 0===j?void 0:j.fullname),n="post/".concat(null===e||void 0===e?void 0:e.userId,"/").concat(null===t||void 0===t?void 0:t.postId);h(n),f(i)}else if("add-comment"===t.type){const e=await r.W.getById(t.postId),i="".concat((null===g||void 0===g?void 0:g._id)===(null===w||void 0===w?void 0:w._id)?"You":null===g||void 0===g?void 0:g.fullname," added a comment in your post "),n="post/".concat(null===e||void 0===e?void 0:e.userId,"/").concat(null===t||void 0===t?void 0:t.postId);h(n),f(i)}else if("private-message"===t.type){const e="".concat(g.fullname," sent you a private message");h("message/"),f(e)}})()}),[g,j]),(0,o.useEffect)((()=>((()=>{const e=t.createdTo===w._id?w:n;y(e)})(),(()=>{const e=t.createdBy===w._id?w:n;x(e)})(),()=>{})),[n]),(0,o.useEffect)((()=>{n||(async()=>{const e=t.createdBy===w._id?t.createdTo:t.createdBy,i=await d.W.getById(e);s(i)})();const e=I.some((e=>e===t._id));return _(e),()=>{}}),[I]),(0,v.jsxs)("section",{className:"notificaiton-preview ".concat(N?"unread":""),onClick:()=>{i.push(p)},children:[(0,v.jsx)("div",{className:"img-container",children:(null===g||void 0===g?void 0:g.imgUrl)&&(0,v.jsx)("img",{src:null===g||void 0===g?void 0:g.imgUrl,alt:"",className:"img"})||(0,v.jsx)("img",{src:u,alt:""})}),(0,v.jsx)("div",{className:"content",children:(0,v.jsx)("p",{children:m})}),(0,v.jsx)("div",{className:"menu",children:(0,v.jsx)("p",{children:(0,v.jsx)(l.Z,{date:t.createdAt})})})]})}function f(e){let{activities:t}=e;return null!==t&&void 0!==t&&t.length?(0,v.jsx)("section",{className:"notifications-list",children:t.map((e=>(0,v.jsx)(m,{activity:e},null===e||void 0===e?void 0:e._id)))}):(0,v.jsx)("div",{className:"notifications-list",children:(0,v.jsx)("div",{className:"no-activities-container",children:(0,v.jsx)("p",{children:"No activities"})})})}var p=i(9722),h=i(6695),g=i(4029);const x=function(){const e=(0,a.I0)(),{loggedInUser:t}=(0,a.v9)((e=>e.userModule)),{activities:i}=(0,a.v9)((e=>e.activityModule)),[d,l]=(0,o.useState)(6);(0,o.useEffect)((()=>(e((0,s.rd)("notifications")),null!==t&&void 0!==t&&t._id&&(e((0,h.au)({userId:t._id})),e((0,h.ap)())),()=>{null!==t&&void 0!==t&&t._id&&(c(),e((0,h.T7)()))})),[e,null===t||void 0===t?void 0:t._id]);const c=()=>{if(!t)return;const i=Date.now();e((0,g.Nq)((0,n.Z)((0,n.Z)({},t),{},{lastSeenActivity:i})))};if(!i)return(0,v.jsx)("div",{className:"message-page",children:(0,v.jsx)("div",{className:"gif-container",children:(0,v.jsx)("img",{className:"loading-gif",src:p,alt:"Loading..."})})});const r=i.slice(0,d);return(0,v.jsxs)("div",{className:"notifications-page",children:[(0,v.jsx)("div",{className:"side-bar",children:(0,v.jsx)("div",{className:"container"})}),(0,v.jsx)("div",{className:"main",children:(0,v.jsxs)("div",{className:"container",children:[(0,v.jsx)(f,{activities:r}),d<i.length&&(0,v.jsx)("button",{className:"show-more-btn",onClick:()=>l((e=>e+6)),children:"Show More"})]})}),(0,v.jsx)("div",{className:"aside",children:(0,v.jsx)("div",{className:"container"})})]})}},773:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(8683),o=i(5987),a=i(2791);function s(e){const t=new Date(e);if(!Number.isNaN(t.valueOf()))return t;const i=String(e).match(/\d+/g);if(null==i||i.length<=2)return t;{const[e,t,...n]=i.map((e=>parseInt(e))),o=[e,t-1,...n];return new Date(Date.UTC(...o))}}function d(e,t,i){return e+" "+(1!==e?t+"s":t)+" "+i}const l=["date","formatter","component","live","minPeriod","maxPeriod","title","now"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},c.apply(this,arguments)}const r=3600,u=86400,v=7*u,m=30*u,f=365*u;function p(e){let{date:t,formatter:i=d,component:p="time",live:h=!0,minPeriod:g=0,maxPeriod:x=v,title:j,now:y=(()=>Date.now())}=e,N=(0,o.Z)(e,l);const[_,w]=(0,a.useState)(y());(0,a.useEffect)((()=>{if(!h)return;const e=(()=>{const e=s(t).valueOf();if(!e)return console.warn("[react-timeago] Invalid Date provided"),0;const i=Math.round(Math.abs(_-e)/1e3),n=i<60?1e3:i<r?6e4:i<u?36e5:1e3*v,o=Math.min(Math.max(n,1e3*g),1e3*x);return o?setTimeout((()=>{w(y())}),o):0})();return()=>{e&&clearTimeout(e)}}),[t,h,x,g,y,_]);const I=p,M=s(t).valueOf();if(!M)return null;const b=Math.round(Math.abs(_-M)/1e3),S=M<_?"ago":"from now",[k,O]=b<60?[Math.round(b),"second"]:b<r?[Math.round(b/60),"minute"]:b<u?[Math.round(b/r),"hour"]:b<v?[Math.round(b/u),"day"]:b<m?[Math.round(b/v),"week"]:b<f?[Math.round(b/m),"month"]:[Math.round(b/f),"year"],T="undefined"===typeof j?"string"===typeof t?t:s(t).toISOString().substr(0,16).replace("T"," "):j,B="time"===I?(0,n.Z)((0,n.Z)({},N),{},{dateTime:s(t).toISOString()}):N,Z=d.bind(null,k,O,S);return a.createElement(I,c({},B,{title:T}),i(k,O,S,M,Z,y))}},5478:(e,t,i)=>{e.exports=i.p+"static/media/loading-circle.b8e847dbc0e0c5799a06.gif"}}]);
//# sourceMappingURL=677.6cd56e53.chunk.js.map