"use strict";(self.webpackChunksocial_network_app=self.webpackChunksocial_network_app||[]).push([[869],{2896:function(e,n,s){s.d(n,{o:function(){return h}});var r=s(4165),i=s(4942),t=s(1413),o=s(5861),a=s(9439),l=s(1363),c=s(2791),d=s(1672),u=s(9722),f=s(184),h=function(e){var n=e.toggleShowCreatePost,s=e.onAddPost,h=e.isShowCreatePost,m=e.loggedInUser,v=(0,c.useState)({body:"",imgBodyUrl:null,videoBodyUrl:null,link:"",title:"",style:{textAlign:"ltr"}}),x=(0,a.Z)(v,2),p=x[0],j=x[1],g=(0,c.useState)(!1),N=(0,a.Z)(g,2),b=N[0],y=N[1],w=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n){var s,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=n.target.name,o="number"===n.target.type?+n.target.value||"":n.target.value,j((function(e){return(0,t.Z)((0,t.Z)({},e),{},(0,i.Z)({},s,o))}));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){return function(){j(null)}}),[]);var k=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n){var s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),e.next=4,(0,d.T)(n);case 4:s=e.sent,y(!1),j((function(e){return(0,t.Z)((0,t.Z)({},e),{},{imgBodyUrl:s.url})})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),y(!1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}(),Z=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n){var s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),e.next=4,(0,d.u)(n);case 4:s=e.sent,y(!1),j((function(e){return(0,t.Z)((0,t.Z)({},e),{},{videoBodyUrl:s.url})})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),y(!1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}();return(0,f.jsx)("section",{className:h?" create-post-modal":"hide create-post-modal",onClick:function(e){e.stopPropagation(),n()},children:(0,f.jsxs)("form",{className:"container",onSubmit:function(e){e.preventDefault(),s(p)},onClick:function(e){e.stopPropagation()},children:[(0,f.jsxs)("div",{className:"title",children:[(0,f.jsx)("h1",{children:"Create a post"}),(0,f.jsx)("span",{className:"close-icon",onClick:n,children:(0,f.jsx)(l.G,{icon:"fa-solid fa-x"})})]}),(0,f.jsxs)("div",{className:"name-container",children:[(0,f.jsx)("div",{className:"img-container",children:(0,f.jsx)("img",{src:null===m||void 0===m?void 0:m.imgUrl,alt:"",className:"img-profile"})}),(0,f.jsx)("div",{className:"name",children:(0,f.jsx)("h2",{children:null===m||void 0===m?void 0:m.fullname})})]}),(0,f.jsx)("div",{className:"input-container",children:(0,f.jsx)("textarea",{required:!0,ref:function(e){e&&e.focus()},onChange:w,type:"text",id:"body",name:"body",value:p.txt,placeholder:"What do you want to talk about?"})}),(0,f.jsx)("div",{className:"link-container",children:(0,f.jsx)("input",{id:"link",name:"link",value:p.link,onChange:w,type:"text",placeholder:"Add a link here"})}),(0,f.jsx)("div",{className:"is-loading-container",children:(0,f.jsx)("p",{children:b&&(0,f.jsx)("span",{children:(0,f.jsx)("img",{src:u,alt:""})})})}),(0,f.jsx)("div",{className:"container-video-body",children:(0,f.jsx)("div",{className:"body-video",children:p.videoBodyUrl&&(0,f.jsx)("video",{width:"100%",height:"300",controls:!0,children:(0,f.jsx)("source",{src:p.videoBodyUrl,type:"video/mp4"})})})}),(0,f.jsx)("div",{className:"container-img-body",children:(0,f.jsx)("div",{className:"body-img",children:p.imgBodyUrl&&(0,f.jsx)("img",{src:p.imgBodyUrl,alt:"",className:"img"})})}),(0,f.jsxs)("div",{className:"btns-add-container",children:[(0,f.jsx)("div",{className:"cancel-btn btn",onClick:function(){j({body:"",imgBodyUrl:null,videoBodyUrl:null,title:"",style:{textAlign:"ltr"}}),n()},children:"Cancel"}),!p.videoBodyUrl&&(0,f.jsx)("div",{className:"add-video-btn btn",children:(0,f.jsxs)("label",{htmlFor:"videoUrl",className:"add-video-container",children:[(0,f.jsx)("input",{onChange:Z,id:"videoUrl",type:"file",name:"videoUrl",accept:"video/*",hidden:!0}),(0,f.jsx)("p",{className:"add-video-body",children:"Add video"})]})}),!p.imgBodyUrl&&(0,f.jsx)("div",{className:"add-img-btn btn",children:(0,f.jsxs)("label",{htmlFor:"imgUrl",className:"add-img-container",children:[(0,f.jsx)("input",{onChange:k,id:"imgUrl",type:"file",name:"imgUrl",accept:"image/*",hidden:!0}),(0,f.jsx)("p",{className:"add-img-body",children:"Add photo"})]})}),(0,f.jsx)("button",{className:"post-btn btn",children:"Done"})]})]})})}},8460:function(e,n,s){s.d(n,{E:function(){return u}});var r=s(1502),i=s(9434),t=s(2791),o=s(9722),a=s(8931),l=s(262),c=s(1363),d=s(184),u=function(){var e=(0,i.I0)(),n=(0,a.UO)(),s=(0,i.v9)((function(e){return e.postModule})).posts,u=(0,i.v9)((function(e){return e.postModule})).pageNumber,f=(0,i.v9)((function(e){return e.postModule})).isPostsLoading,h=(0,i.v9)((function(e){return e.postModule})).postsLength,m=function(){var r={pageNumber:u};n.userId&&(r.userId=n.userId),(h||s)&&h!==(null===s||void 0===s?void 0:s.length)&&(e((0,l.v)(r)),e((0,l.dH)()),e((0,l.bs)()))},v=function(){(null===s||void 0===s?void 0:s.length)>=h||window.scrollY+window.innerHeight+.9>=document.documentElement.scrollHeight&&m()};return(0,t.useEffect)((function(){return window.addEventListener("scroll",v),function(){window.removeEventListener("scroll",v)}}),[h]),s?(0,d.jsxs)("section",{className:"posts-list",children:[s.map((function(e,n){return(0,d.jsx)(r.G,{post:e},e._id+n)})),(0,d.jsxs)("div",{onClick:m,className:"load-more",children:[!f&&(null===s||void 0===s?void 0:s.length)<h&&(0,d.jsx)("p",{className:"load-btn",children:(0,d.jsx)("span",{children:(0,d.jsx)(c.G,{icon:"fa-solid fa-caret-down"})})}),f&&(null===s||void 0===s?void 0:s.length)<h&&(0,d.jsx)("span",{className:"gif-container",children:(0,d.jsx)("img",{className:"loading-gif",src:o,alt:""})}),(null===s||void 0===s?void 0:s.length)===h&&(0,d.jsx)("p",{children:"No more posts"})]})]}):(0,d.jsx)("div",{className:"posts-list",children:(0,d.jsx)("span",{className:"gif-container",children:(0,d.jsx)("img",{className:"loading-gif",src:o,alt:""})})})}},1869:function(e,n,s){s.r(n),s.d(n,{default:function(){return k}});var r=s(2791),i=s(9434),t=s(1413),o=s(9439),a=s(1363),l=s(2896),c=s(262),d=s(184),u=function(){var e=(0,i.I0)(),n=(0,i.v9)((function(e){return e.userModule})).loggedInUser,s=(0,r.useState)(!1),u=(0,o.Z)(s,2),f=u[0],h=u[1],m=function(){h((function(e){return!e}))};return(0,d.jsxs)("section",{className:"add-post",onClick:m,children:[(0,d.jsxs)("section",{className:"top",children:[(0,d.jsx)("div",{className:"img-container",children:(0,d.jsx)("img",{src:n.imgUrl,alt:"",className:"icon"})}),(0,d.jsx)("button",{className:"input-container",children:(0,d.jsx)("span",{children:"Start a post"})})]}),(0,d.jsxs)("section",{className:"btns-container",children:[(0,d.jsxs)("button",{children:[(0,d.jsx)(a.G,{className:"photo icon",icon:"fa-solid fa-image"}),(0,d.jsx)("span",{children:"Photo"})]}),(0,d.jsxs)("button",{children:[(0,d.jsx)(a.G,{className:"video icon",icon:"fa-solid fa-video"}),(0,d.jsx)("span",{children:"Video"})]}),(0,d.jsxs)("button",{children:[(0,d.jsx)(a.G,{className:"calendar icon",icon:"fa-solid fa-calendar-days"}),(0,d.jsx)("span",{children:"Event"})]}),(0,d.jsxs)("button",{children:[(0,d.jsx)(a.G,{className:"newspaper icon",icon:"fa-solid fa-newspaper"}),(0,d.jsx)("span",{children:"Write article"})]})]}),(0,d.jsx)(l.o,{isShowCreatePost:f,toggleShowCreatePost:m,onAddPost:function(s){var r=(0,t.Z)((0,t.Z)({},s),{},{userId:n._id,fullname:n.fullname});e((0,c.TJ)(r)).then((function(){return m()}))},loggedInUser:n})]})},f=s(8460),h=function(e){var n=e.onSetSort;return(0,d.jsxs)("section",{className:"sort-by",children:[(0,d.jsx)("hr",{className:"divider"}),(0,d.jsx)("form",{action:"",className:"sort-container",children:(0,d.jsxs)("label",{htmlFor:"sortBy",className:"label",children:["Sort by:",(0,d.jsxs)("select",{name:"sortBy",id:"opts",onChange:function(e){n(e.target.value)},children:[(0,d.jsx)("option",{value:"-1",children:"Newest"}),(0,d.jsx)("option",{value:"1",children:"Oldest"})]})]})})]})},m=s(9722),v=function(){var e=(0,i.I0)(),n=(0,i.v9)((function(e){return e.postModule})).posts;(0,r.useEffect)((function(){e((0,c.Nz)()),e((0,c.Cd)())}),[e]);return n?(0,d.jsxs)("section",{className:"posts",children:[(0,d.jsx)(u,{}),(0,d.jsx)(h,{onSetSort:function(n){var s={sort:+n};e((0,c.v)(s)),e((0,c.Nz)()),e((0,c.Cd)())}}),n&&(0,d.jsx)(f.E,{})]}):(0,d.jsx)("section",{className:"posts",children:(0,d.jsx)("img",{src:m,alt:"",style:{position:"relative",left:" 50%",transform:" translate(-50%)"}})})},x=s(8931),p=s(4029),j=function(){var e=(0,i.v9)((function(e){return e.userModule})).users,n=(0,i.I0)(),s=(0,x.k6)(),t=(0,i.v9)((function(e){return e.userModule})).loggedInUser,a=(0,r.useState)([]),l=(0,o.Z)(a,2),c=l[0],u=l[1],f=(0,r.useCallback)((function(){if(e&&t){var n=e.filter((function(e){return!t.connections.some((function(n){return n.userId===e._id}))}));u(n)}}),[e,t]);(0,r.useEffect)((function(){f()}),[f]),(0,r.useEffect)((function(){n((0,p.Rf)())}),[n]);return c.length>0&&(0,d.jsxs)("section",{className:"right-side-bar",children:[(0,d.jsxs)("div",{className:"container",children:[(0,d.jsx)("div",{className:"title",children:(0,d.jsx)("p",{children:"Add to your feed"})}),(0,d.jsx)("br",{}),(0,d.jsx)("div",{className:"list",children:(null===c||void 0===c?void 0:c.length)&&[0,1,2].map((function(e,n){var r,i,t,o;return(0,d.jsxs)("div",{className:"preview",onClick:function(){var n;return s.push("profile/".concat(null===(n=c[e])||void 0===n?void 0:n._id))},children:[(0,d.jsx)("div",{className:"img-container",children:(0,d.jsx)("img",{src:null===(i=c[e])||void 0===i?void 0:i.imgUrl,className:"img",alt:""})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"fullname",children:(0,d.jsx)("p",{children:null===(t=c[e])||void 0===t?void 0:t.fullname})}),(0,d.jsx)("div",{className:"profession",children:(0,d.jsx)("p",{children:null===(o=c[e])||void 0===o?void 0:o.profession})}),(0,d.jsx)("div",{className:"btn"})]})]},(null===(r=c[e])||void 0===r?void 0:r._id)||n)}))})]}),(0,d.jsxs)("div",{className:"else-container",children:[(0,d.jsx)("div",{children:(0,d.jsx)("h3",{children:"Promoted"})}),(0,d.jsx)("br",{}),(0,d.jsx)("div",{children:(0,d.jsx)("p",{children:"Looking for a full-stack developer for your project or team? I'm open to collaboration and exciting challenges."})}),(0,d.jsx)("br",{}),(0,d.jsx)("div",{className:"img-container",children:(0,d.jsx)("a",{href:"https://www.shlomi.dev/",target:"_blank",rel:"noreferrer",children:(0,d.jsx)("img",{src:"https://res.cloudinary.com/duajg3ah1/image/upload/v1741866031/6ed80c70-7184-4e22-af43-c1b9357bfb2c.png",className:"img",alt:""})})})]})]})};function g(e){return(0,d.jsxs)("section",{className:"community-panel",children:[(0,d.jsx)("div",{children:(0,d.jsx)("img",{src:"https://images.unsplash.com/photo-1488646953014-85cb44e25828?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1035&q=80",alt:""})}),(0,d.jsx)("div",{children:(0,d.jsxs)("p",{children:["Explore topics you are interested in ",(0,d.jsx)("br",{})," with Travelsdin"]})})]})}var N=s(4165),b=s(5861),y=function(e){var n,s=(0,i.I0)(),r=(0,x.k6)(),t=(0,i.v9)((function(e){return e.userModule})).loggedInUser,o=function(){var e=(0,b.Z)((0,N.Z)().mark((function e(){return(0,N.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s((0,p.kS)()).then((function(e){e&&r.push("/")}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(!t)return(0,d.jsx)("section",{className:"feed-identity-module",children:"Loading"});var l=t.fullname,c=t.imgUrl,u=t.profession;return(0,d.jsx)("section",{className:"feed-identity-module",children:(0,d.jsxs)("div",{className:"",children:[(0,d.jsx)("div",{className:"bg",children:(0,d.jsx)("div",{className:"profile-container",onClick:function(){return r.push("profile/".concat(t._id))},children:(0,d.jsx)("img",{src:c,alt:"",className:"img"})})}),(0,d.jsxs)("div",{className:"profile-name",children:[(0,d.jsx)("h1",{children:l}),(0,d.jsx)("p",{className:"professional",children:u})]}),(0,d.jsxs)("div",{className:"views",children:[(0,d.jsx)("div",{children:(0,d.jsxs)("p",{children:[null===t||void 0===t||null===(n=t.connections)||void 0===n?void 0:n.length," connections"]})}),(0,d.jsx)("div",{})]}),(0,d.jsx)("div",{className:"my-items",children:(0,d.jsxs)("div",{onClick:o,children:[(0,d.jsx)("p",{children:"Logout"}),(0,d.jsx)("span",{children:(0,d.jsx)(a.G,{icon:"fa-solid fa-arrow-right-from-bracket"})})]})})]})})};function w(e){return(0,d.jsxs)("section",{className:"left-side-bar",children:[(0,d.jsx)(y,{}),(0,d.jsx)(g,{})]})}var k=function(){var e=(0,i.v9)((function(e){return e.userModule})).loggedInUser,n=(0,i.I0)();return(0,r.useEffect)((function(){n((0,c.rd)("home")),n((0,c.bs)(1))}),[n]),e?(0,d.jsxs)("section",{className:"feed-page",children:[(0,d.jsx)(w,{}),(0,d.jsx)(v,{}),(0,d.jsx)(j,{})]}):(0,d.jsx)("section",{className:"feed-load",children:(0,d.jsx)("div",{className:"loading",children:(0,d.jsx)("span",{children:(0,d.jsx)("img",{src:m,alt:""})})})})}},1672:function(e,n,s){s.d(n,{T:function(){return a},u:function(){return l}});var r=s(4165),i=s(5861),t=s(1732),o=function(e){return new Promise((function(n,s){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return n(r.result)},r.onerror=function(e){return s(e)}}))},a=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var s,i,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=n.target.files[0]){e.next=4;break}throw new Error("No file selected");case 4:return e.next=6,o(s);case 6:return i=e.sent,e.next=9,t.R.post("cloudinary/upload",{file:i,resourceType:"image"});case 9:return a=e.sent,e.abrupt("return",a);case 13:throw e.prev=13,e.t0=e.catch(0),console.error("Error uploading image:",null===e.t0||void 0===e.t0?void 0:e.t0.message),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var s,i,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s=n.target.files[0]){e.next=4;break}throw new Error("No file selected");case 4:return e.next=6,o(s);case 6:return i=e.sent,e.next=9,t.R.post("cloudinary/upload",{file:i,resourceType:"video"});case 9:return a=e.sent,e.abrupt("return",a);case 13:throw e.prev=13,e.t0=e.catch(0),console.error("Error uploading video:",null===e.t0||void 0===e.t0?void 0:e.t0.message),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(n){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=869.0260ecd2.chunk.js.map