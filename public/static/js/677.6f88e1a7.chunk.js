"use strict";(self.webpackChunksocial_network_app=self.webpackChunksocial_network_app||[]).push([[677],{7677:function(e,n,t){t.r(n),t.d(n,{default:function(){return Z}});var i=t(1413),a=t(9439),r=t(2791),o=t(9434),c=t(262),u=t(4165),s=t(5861),d=t(8874),l=t(6923),v=t(8931),f=t(7019),m=t(5478),p=t(184);function h(e){var n=e.activity,t=(0,v.k6)(),i=(0,r.useState)(null),c=(0,a.Z)(i,2),h=c[0],x=c[1],g=(0,r.useState)(null),y=(0,a.Z)(g,2),j=y[0],Z=y[1],b=(0,r.useState)(null),N=(0,a.Z)(b,2),k=N[0],_=N[1],w=(0,r.useState)(null),I=(0,a.Z)(w,2),M=I[0],S=I[1],O=(0,r.useState)(null),T=(0,a.Z)(O,2),B=T[0],D=T[1],E=(0,r.useState)(!1),C=(0,a.Z)(E,2),P=C[0],U=C[1],W=(0,o.v9)((function(e){return e.userModule})).loggedInUser,A=(0,o.v9)((function(e){return e.activityModule})).unreadActivities,Y=function(){var e=(0,s.Z)((0,u.Z)().mark((function e(){var t,i;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.createdBy===W._id?n.createdTo:n.createdBy,e.next=3,d.W.getById(t);case 3:i=e.sent,x(i);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=(0,s.Z)((0,u.Z)().mark((function e(){var t,i,a,r,o,c,s,d,l,v;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M&&B){e.next=2;break}return e.abrupt("return");case 2:if("add-like"!==n.type){e.next=12;break}return e.next=5,f.W.getById(n.postId);case 5:t=e.sent,i="".concat((null===M||void 0===M?void 0:M._id)===(null===W||void 0===W?void 0:W._id)?"You":null===M||void 0===M?void 0:M.fullname," liked  post of ").concat(B._id===W._id?"you":null===B||void 0===B?void 0:B.fullname),a="post/".concat(null===t||void 0===t?void 0:t.userId,"/").concat(null===n||void 0===n?void 0:n.postId),_(a),Z(i),e.next=33;break;case 12:if("remove-like"!==n.type){e.next=22;break}return e.next=15,f.W.getById(n.postId);case 15:r=e.sent,o="".concat((null===M||void 0===M?void 0:M._id)===(null===W||void 0===W?void 0:W._id)?"You":null===M||void 0===M?void 0:M.fullname," unliked  post of ").concat(B._id===W._id?"you":null===B||void 0===B?void 0:B.fullname),c="post/".concat(null===r||void 0===r?void 0:r.userId,"/").concat(null===n||void 0===n?void 0:n.postId),_(c),Z(o),e.next=33;break;case 22:if("add-comment"!==n.type){e.next=32;break}return e.next=25,f.W.getById(n.postId);case 25:s=e.sent,d="".concat((null===M||void 0===M?void 0:M._id)===(null===W||void 0===W?void 0:W._id)?"You":null===M||void 0===M?void 0:M.fullname," added a comment in your post "),l="post/".concat(null===s||void 0===s?void 0:s.userId,"/").concat(null===n||void 0===n?void 0:n.postId),_(l),Z(d),e.next=33;break;case 32:"private-message"===n.type&&(v="".concat(M.fullname," sent you a private message"),"message/",_("message/"),Z(v));case 33:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){q()}),[M,B]),(0,r.useEffect)((function(){return function(){var e=n.createdTo===W._id?W:h;D(e)}(),function(){var e=n.createdBy===W._id?W:h;S(e)}(),function(){}}),[h]),(0,r.useEffect)((function(){h||Y();var e=A.some((function(e){return e===n._id}));return U(e),function(){}}),[A]),(0,p.jsxs)("section",{className:"notificaiton-preview ".concat(P?"unread":""),onClick:function(){t.push(k)},children:[(0,p.jsx)("div",{className:"img-container",children:(null===M||void 0===M?void 0:M.imgUrl)&&(0,p.jsx)("img",{src:null===M||void 0===M?void 0:M.imgUrl,alt:"",className:"img"})||(0,p.jsx)("img",{src:m,alt:""})}),(0,p.jsx)("div",{className:"content",children:(0,p.jsx)("p",{children:j})}),(0,p.jsx)("div",{className:"menu",children:(0,p.jsx)("p",{children:(0,p.jsx)(l.Z,{date:n.createdAt})})})]})}function x(e){var n=e.activities;return null!==n&&void 0!==n&&n.length?(0,p.jsx)("section",{className:"notifications-list",children:n.map((function(e){return(0,p.jsx)(h,{activity:e},null===e||void 0===e?void 0:e._id)}))}):(0,p.jsx)("div",{className:"notifications-list",children:(0,p.jsx)("div",{className:"no-activities-container",children:(0,p.jsx)("p",{children:"No activities"})})})}var g=t(9722),y=t(6695),j=t(4029);var Z=function(){var e=(0,o.I0)(),n=(0,o.v9)((function(e){return e.userModule})).loggedInUser,t=(0,o.v9)((function(e){return e.activityModule})).activities,u=(0,r.useState)(6),s=(0,a.Z)(u,2),d=s[0],l=s[1];(0,r.useEffect)((function(){return e((0,c.rd)("notifications")),null!==n&&void 0!==n&&n._id&&(e((0,y.au)({userId:n._id})),e((0,y.ap)())),function(){null!==n&&void 0!==n&&n._id&&(v(),e((0,y.T7)()))}}),[e,null===n||void 0===n?void 0:n._id]);var v=function(){if(n){var t=Date.now();e((0,j.Nq)((0,i.Z)((0,i.Z)({},n),{},{lastSeenActivity:t})))}};if(!t)return(0,p.jsx)("div",{className:"message-page",children:(0,p.jsx)("div",{className:"gif-container",children:(0,p.jsx)("img",{className:"loading-gif",src:g,alt:"Loading..."})})});var f=t.slice(0,d);return(0,p.jsxs)("div",{className:"notifications-page",children:[(0,p.jsx)("div",{className:"side-bar",children:(0,p.jsx)("div",{className:"container"})}),(0,p.jsx)("div",{className:"main",children:(0,p.jsxs)("div",{className:"container",children:[(0,p.jsx)(x,{activities:f}),d<t.length&&(0,p.jsx)("button",{className:"show-more-btn",onClick:function(){return l((function(e){return e+6}))},children:"Show More"})]})}),(0,p.jsx)("div",{className:"aside",children:(0,p.jsx)("div",{className:"container"})})]})}},6923:function(e,n,t){t.d(n,{Z:function(){return Z}});var i=t(1413),a=t(9439),r=t(5987),o=t(2791),c=t(3433),u=t(3878),s=t(9199),d=t(181),l=t(5267);function v(e){var n=new Date(e);if(!Number.isNaN(n.valueOf()))return n;var t=String(e).match(/\d+/g);if(null==t||t.length<=2)return n;var i,a=t.map((function(e){return parseInt(e)})),r=(i=a,(0,u.Z)(i)||(0,s.Z)(i)||(0,d.Z)(i)||(0,l.Z)()),o=r[0],v=r[1],f=r.slice(2),m=[o,v-1].concat((0,c.Z)(f));return new Date(Date.UTC.apply(Date,(0,c.Z)(m)))}function f(e,n,t){return e+" "+(1!==e?n+"s":n)+" "+t}var m=["date","formatter","component","live","minPeriod","maxPeriod","title","now"];function p(){return p=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},p.apply(this,arguments)}var h=3600,x=86400,g=7*x,y=30*x,j=365*x;function Z(e){var n=e.date,t=e.formatter,c=void 0===t?f:t,u=e.component,s=void 0===u?"time":u,d=e.live,l=void 0===d||d,Z=e.minPeriod,b=void 0===Z?0:Z,N=e.maxPeriod,k=void 0===N?g:N,_=e.title,w=e.now,I=void 0===w?function(){return Date.now()}:w,M=(0,r.Z)(e,m),S=(0,o.useState)(I()),O=(0,a.Z)(S,2),T=O[0],B=O[1];(0,o.useEffect)((function(){if(l){var e=function(){var e=v(n).valueOf();if(!e)return console.warn("[react-timeago] Invalid Date provided"),0;var t=Math.round(Math.abs(T-e)/1e3),i=t<60?1e3:t<h?6e4:t<x?36e5:6048e5,a=Math.min(Math.max(i,1e3*b),1e3*k);return a?setTimeout((function(){B(I())}),a):0}();return function(){e&&clearTimeout(e)}}}),[n,l,k,b,I,T]);var D=s,E=v(n).valueOf();if(!E)return null;var C=Math.round(Math.abs(T-E)/1e3),P=E<T?"ago":"from now",U=C<60?[Math.round(C),"second"]:C<h?[Math.round(C/60),"minute"]:C<x?[Math.round(C/h),"hour"]:C<g?[Math.round(C/x),"day"]:C<y?[Math.round(C/g),"week"]:C<j?[Math.round(C/y),"month"]:[Math.round(C/j),"year"],W=(0,a.Z)(U,2),A=W[0],Y=W[1],q="undefined"===typeof _?"string"===typeof n?n:v(n).toISOString().substr(0,16).replace("T"," "):_,L="time"===D?(0,i.Z)((0,i.Z)({},M),{},{dateTime:v(n).toISOString()}):M,z=f.bind(null,A,Y,P);return o.createElement(D,p({},L,{title:q}),c(A,Y,P,E,z,I))}},5478:function(e,n,t){e.exports=t.p+"static/media/loading-circle.b8e847dbc0e0c5799a06.gif"}}]);
//# sourceMappingURL=677.6f88e1a7.chunk.js.map