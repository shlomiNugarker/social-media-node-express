"use strict";(self.webpackChunksocial_network_app=self.webpackChunksocial_network_app||[]).push([[974],{8460:(e,s,l)=>{l.d(s,{E:()=>m});var i=l(1502),n=l(9434),a=l(2791),o=l(9722),r=l(8931),t=l(262),c=l(1363),d=l(184);const m=()=>{const e=(0,n.I0)(),s=(0,r.UO)(),{posts:l}=(0,n.v9)((e=>e.postModule)),{pageNumber:m}=(0,n.v9)((e=>e.postModule)),{isPostsLoading:u}=(0,n.v9)((e=>e.postModule)),{postsLength:h}=(0,n.v9)((e=>e.postModule)),p=()=>{const i={pageNumber:m};s.userId&&(i.userId=s.userId),(h||l)&&h!==(null===l||void 0===l?void 0:l.length)&&(e((0,t.v)(i)),e((0,t.dH)()),e((0,t.bs)()))},g=()=>{(null===l||void 0===l?void 0:l.length)>=h||window.scrollY+window.innerHeight+.9>=document.documentElement.scrollHeight&&p()};return(0,a.useEffect)((()=>(window.addEventListener("scroll",g),()=>{window.removeEventListener("scroll",g)})),[h]),l?(0,d.jsxs)("section",{className:"posts-list",children:[l.map(((e,s)=>(0,d.jsx)(i.G,{post:e},e._id+s))),(0,d.jsxs)("div",{onClick:p,className:"load-more",children:[!u&&(null===l||void 0===l?void 0:l.length)<h&&(0,d.jsx)("p",{className:"load-btn",children:(0,d.jsx)("span",{children:(0,d.jsx)(c.G,{icon:"fa-solid fa-caret-down"})})}),u&&(null===l||void 0===l?void 0:l.length)<h&&(0,d.jsx)("span",{className:"gif-container",children:(0,d.jsx)("img",{className:"loading-gif",src:o,alt:""})}),(null===l||void 0===l?void 0:l.length)===h&&(0,d.jsx)("p",{children:"No more posts"})]})]}):(0,d.jsx)("div",{className:"posts-list",children:(0,d.jsx)("span",{className:"gif-container",children:(0,d.jsx)("img",{className:"loading-gif",src:o,alt:""})})})}},4974:(e,s,l)=>{l.r(s),l.d(s,{default:()=>x});var i=l(8683),n=l(8931),a=l(2791),o=l(9434),r=l(1363),t=l(8874),c=l(8460),d=l(9334),m=l(9722),u=l(4029),h=l(1672),p=l(184);function g(e){let{toggleShowEditModal:s,user:l}=e;const n=(0,o.I0)(),[t,c]=(0,a.useState)({age:l.age,bg:l.bg,email:l.email,fullname:l.fullname,imgUrl:l.imgUrl,phone:l.phone,profession:l.profession,birthDate:l.birthDate}),{age:d,bg:m,email:g,fullname:f,imgUrl:x,phone:v,profession:j,birthDate:N}=t;(0,a.useEffect)((()=>{}),[]);const b=e=>{let{target:s}=e;const n=s.name,a="number"===s.type?+s.value||"":s.value;c((e=>(0,i.Z)((0,i.Z)({},e),{},{_id:l._id,[n]:a})))};return(0,p.jsxs)("section",{className:"edit-modal",children:[(0,p.jsx)("div",{className:"bg",onClick:s}),(0,p.jsxs)("div",{className:"container",children:[(0,p.jsxs)("div",{className:"title",children:[(0,p.jsx)("p",{children:"Edit profile"}),(0,p.jsx)("span",{onClick:s,children:(0,p.jsx)(r.G,{icon:"fa-solid fa-x"})})]}),(0,p.jsx)("div",{className:"form-container",children:(0,p.jsxs)("form",{className:"form",action:"",children:[(0,p.jsxs)("label",{htmlFor:"imgUrl",className:"add-file",children:[(0,p.jsxs)("div",{className:"add-btn",children:[(0,p.jsx)("p",{children:"Add image profile"}),(0,p.jsx)(r.G,{className:"upload-logo",icon:"fa-solid fa-cloud-arrow-up"})]}),(0,p.jsx)("input",{onChange:async e=>{const s=await(0,h.T)(e);c((e=>(0,i.Z)((0,i.Z)({},e),{},{imgUrl:s.url})))},id:"imgUrl",type:"file",name:"imgUrl",hidden:!0}),(0,p.jsx)("img",{className:"img-to-upload",src:x,alt:""})]}),(0,p.jsxs)("label",{htmlFor:"first-name",className:"first-name",children:[(0,p.jsxs)("p",{children:["Fullname ",(0,p.jsx)("span",{children:"*"})]}),(0,p.jsx)("input",{name:"fullname",onChange:b,id:"fullname",type:"text",value:f||""})]}),(0,p.jsxs)("label",{htmlFor:"email",className:"email",children:[(0,p.jsx)("p",{children:"Email"}),(0,p.jsx)("input",{name:"email",onChange:b,id:"email",type:"email",value:g||""})]}),(0,p.jsxs)("label",{htmlFor:"profession",className:"profession",children:[(0,p.jsx)("p",{children:"Profession"}),(0,p.jsx)("input",{name:"profession",onChange:b,id:"profession",type:"text",value:j||""})]}),(0,p.jsxs)("label",{htmlFor:"age",className:"age",children:[(0,p.jsx)("p",{children:"Age"}),(0,p.jsx)("input",{name:"age",onChange:b,id:"age",type:"number",value:d||""})]}),(0,p.jsxs)("label",{htmlFor:"phone",className:"phone",children:[(0,p.jsx)("p",{children:"Phone"}),(0,p.jsx)("input",{name:"phone",onChange:b,id:"phone",type:"text",value:v||""})]})]})}),(0,p.jsx)("div",{className:"btn-save-container",children:(0,p.jsx)("button",{onClick:()=>{n((0,u.Nq)((0,i.Z)((0,i.Z)({},l),t))).then((e=>{e&&s()}))},children:"Save"})})]})]})}var f=l(262);const x=function(){const e=(0,n.UO)(),s=(0,n.k6)(),l=(0,o.I0)(),[h,x]=(0,a.useState)(null),[v,j]=(0,a.useState)(!1),[N,b]=(0,a.useState)(!1),[w,y]=(0,a.useState)(null),{posts:I}=(0,o.v9)((e=>e.postModule)),{loggedInUser:C}=(0,o.v9)((e=>e.userModule));(0,a.useEffect)((()=>{(()=>{var e;const s=null===C||void 0===C||null===(e=C.connections)||void 0===e?void 0:e.some((e=>(null===e||void 0===e?void 0:e.userId)===(null===h||void 0===h?void 0:h._id)));y(s)})()}),[h]);const E=()=>{j((e=>!e))},S=()=>{b((e=>!e))};if((0,a.useEffect)((()=>{const s={userId:e.userId};return l((0,f.rd)("profile")),l((0,f.L6)(s)),(async()=>{const s=await t.W.getById(e.userId);x((()=>s))})(),l((0,f.Nz)(s)),l((0,f.Cd)()),()=>{l((0,f.L6)(null))}}),[e.userId,C]),!h)return(0,p.jsx)("section",{className:"feed-load",children:(0,p.jsx)("span",{className:"gif-container",children:(0,p.jsx)("img",{className:"loading-gif",src:m,alt:""})})});const k=(null===C||void 0===C?void 0:C._id)===(null===h||void 0===h?void 0:h._id);return(0,p.jsxs)("section",{className:"profile-page",children:[(0,p.jsxs)("div",{className:"left",children:[(0,p.jsxs)("div",{className:"user-profile",children:[(0,p.jsx)("div",{className:"bg",style:{backgroundImage:"url(".concat(h.bg,")")},children:(0,p.jsx)("div",{className:"img-container",onClick:()=>{E()},children:(0,p.jsx)("img",{src:h.imgUrl,alt:"",className:"img"})})}),(0,p.jsx)("div",{className:"user-details",children:(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"name",children:(0,p.jsx)("h1",{children:h.fullname})}),(0,p.jsx)("div",{className:"profession",children:(0,p.jsx)("p",{children:h.profession})}),(0,p.jsx)("div",{className:"profession",children:(0,p.jsx)("p",{children:h.email})}),(0,p.jsxs)("div",{className:"btns-container",children:[k&&(0,p.jsx)("button",{className:"add-details",onClick:S,children:"Edit profile"}),!k&&(0,p.jsxs)("button",{className:"connect",onClick:async()=>{if(h)if(!0===w){const e=JSON.parse(JSON.stringify(h)),s=JSON.parse(JSON.stringify(C));s.connections=s.connections.filter((s=>s.userId!==e._id)),e.connections=e.connections.filter((e=>e.userId!==s._id)),l((0,u.Nq)(s)),l((0,u.Nq)(e)),x((s=>(0,i.Z)((0,i.Z)({},s),e)))}else if(!1===w){const e=JSON.parse(JSON.stringify(h)),s=JSON.parse(JSON.stringify(C));e.connections.unshift({userId:s._id,fullname:s.fullname}),s.connections.push({userId:e._id,fullname:e.fullname}),l((0,u.Nq)(s)),l((0,u.Nq)(e)),x(e)}},children:[(0,p.jsx)(r.G,{icon:"fa-solid fa-user-plus"}),(0,p.jsx)("p",{children:w?"Disconnect":"Connect"})]}),(0,p.jsx)("button",{className:"message",onClick:()=>{s.push("/main/message/".concat(null===h||void 0===h?void 0:h._id))},children:"Message"})]})]})})]}),(0,p.jsx)("div",{className:"user-posts",children:(null===I||void 0===I?void 0:I.length)&&(0,p.jsx)(c.E,{posts:I})||(0,p.jsx)("div",{children:(0,p.jsxs)("p",{children:[h.fullname," has not published any posts yet."]})})})]}),(0,p.jsxs)("div",{className:"right",children:[(0,p.jsx)("div",{className:"top-div"}),(0,p.jsx)("div",{className:"bottom-div"})]}),v&&(0,p.jsx)(d.O,{toggleShowImg:E,imgUrl:h.imgUrl,title:"Profile photo"}),N&&(0,p.jsx)(g,{toggleShowEditModal:S,user:h})]})}},1672:(e,s,l)=>{l.d(s,{T:()=>a,u:()=>o});var i=l(1732);const n=e=>new Promise(((s,l)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>s(i.result),i.onerror=e=>l(e)})),a=async e=>{try{const s=e.target.files[0];if(!s)throw new Error("No file selected");const l=await n(s);return await i.R.post("cloudinary/upload",{file:l,resourceType:"image"})}catch(s){throw console.error("Error uploading image:",null===s||void 0===s?void 0:s.message),s}},o=async e=>{try{const s=e.target.files[0];if(!s)throw new Error("No file selected");const l=await n(s);return await i.R.post("cloudinary/upload",{file:l,resourceType:"video"})}catch(s){throw console.error("Error uploading video:",null===s||void 0===s?void 0:s.message),s}}}}]);
//# sourceMappingURL=974.0fc5f6b5.chunk.js.map